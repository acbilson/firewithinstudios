<head>
  <!-- Page Metadata -->
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="{{if .IsHome}}{{ $.Site.Params.description }}{{else}}{{.Description}}{{end}}" />

  <!-- Page Title -->
  <title>{{- .Site.Title -}}</title>

  <!-- Page Links -->
  {{- $normalizeStyle := resources.Get "css/vendor/normalize.css" -}}
  {{- $syntaxStyle := resources.Get "css/vendor/syntax.css" -}}
  {{- $style := slice $normalizeStyle $syntaxStyle | resources.Concat "css/concated.css" | minify -}}
  <link href="{{ $style.Permalink }}" rel="stylesheet">

  {{ $mainStyle := resources.Get "css/main.scss" | resources.ToCSS | minify }}
  <link href="{{ $mainStyle.Permalink }}" type="text/css" rel="stylesheet">

  <!-- favicon.ico -->
  <link rel="shortcut icon" href="{{ .Site.BaseURL }}/favicon.ico" />

  <!-- adds PWA manifest -->
  <link rel="manifest" href="{{ .Site.BaseURL }}/manifest.json">

  <!-- adds supported RSS feeds -->
  {{ range .AlternativeOutputFormats -}}
  <link rel="{{ .Rel }}" type="{{ .MediaType.Type | html }}" href="{{ $.Site.BaseURL }}/logs/index.xml" title="{{ $.Site.Title }} - Ship's Log" />
  <link rel="{{ .Rel }}" type="{{ .MediaType.Type | html }}" href="{{ $.Site.BaseURL }}/plants/index.xml" title="{{ $.Site.Title }} - Notes" />
  {{ end -}}

  <!-- sets color scheme before page load -->
  <script>
    if (localStorage.getItem('color-mode')) {
      // handles user's transition from light/dark
      if (localStorage.getItem('color-mode') === 'light') {
        document.documentElement.setAttribute('color-mode', 'minimal');
        localStorage.setItem('color-mode', 'minimal');
      } else if (localStorage.getItem('color-mode') === 'dark') {
        document.documentElement.setAttribute('color-mode', 'void');
        localStorage.setItem('color-mode', 'void');
      } else {
        document.documentElement.setAttribute('color-mode', localStorage.getItem('color-mode'));
      }
    } else {
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.setAttribute('color-mode', 'void');
        localStorage.setItem('color-mode', 'void');
      } else {
        document.documentElement.setAttribute('color-mode', 'minimal');
        localStorage.setItem('color-mode', 'minimal');
      }
    }
  </script>
</head>
